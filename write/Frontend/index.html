<!DOCTYPE html>
<html lang="en">

<head>
    <title>HW1</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" type="text/css" href="index.css" /> -->
    <style>
        #form2 {
            padding: 5px;
            border: 2px solid black;
            display: grid;
            grid-template-columns: 30% 35% 35%;
            margin: auto auto;
            width: 50%;
        }

        #form2-label {
            grid-column: span 2;
        }

        #container {
            display: grid;
            grid-template-columns: 1;
            grid-row-gap: 10px;
        }
    </style>
    <script>
        function form2_golang() {
            function reqListener() {
                var data = JSON.parse(this.responseText);
                document.getElementById('form2-label').innerHTML = data["result"];
            }

            function reqError(err) {
                console.log('Fetch Error :-S', err);
            }

            var oReq = new XMLHttpRequest();
            oReq.onload = reqListener;
            oReq.onerror = reqError;
            data = document.getElementById("form1-line-number").value;
            oReq.open('get', `http://localhost:3003/golang/write?linenumber=${data}`);
            oReq.setRequestHeader('Content-type', 'application/json');
            oReq.send();
        }

        function form2_nodejs() {
            function reqListener() {
                var data = JSON.parse(this.responseText);
                document.getElementById('form2-label').innerHTML = data["result"];
            }

            function reqError(err) {
                console.log('Fetch Error :-S', err);
            }

            var oReq = new XMLHttpRequest();
            oReq.onload = reqListener;
            oReq.onerror = reqError;
            data = document.getElementById("form1-line-number").value;
            oReq.open('get', `http://localhost:3002/nodejs/write?linenumber=${data}`);
            oReq.setRequestHeader('Content-type', 'application/json');
            oReq.send();
        }
    </script>
    <!-- <script src="index.js"></script> -->
</head>

<body>
    <div id="container">
        <form id="form2" method="post">
            <input type="text" name="line number" id="form1-line-number" placeholder="line number" />
            <button type="button" value="golang" onclick="form2_golang()">golang</button>
            <button type="button" value="nodejs" onclick="form2_nodejs()">nodejs</button>
            <label id="form2-label">the line would be shown here</label>
        </form>
    </div>
</body>

</html>